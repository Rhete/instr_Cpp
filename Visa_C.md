# introduction

介绍VISA使用时需要的内容。简单介绍了VXIplug&play的功能和特性。

## VISA需要的软硬件

1. NI 基础硬件支持，包括GPIB, GPIB-VXI, MXI/VXI。同时电脑需要有足够的接口
2. 对于GPIB的应用，需要安装**NI-488**，对于VXI应用，需要安装**NI-VXI**，对于其他硬件接口，NI-VISA使用系统标准驱动
3. 发行介质（？）
4. 来自其他vendor的命令模块需要哪个vender提供的GPIB-VXI VISA内容
5. 下载最新版本，访问 <https://ni.com/visa>

## VXI*plug&play* 概述

VXI*plug&play*系统联盟旨在通过开放的、多vendor的系统来提高终端用户使用便捷。联盟成员有着实现包含软硬件的多vendor系统架构的共同愿景，因此，联盟的成员们通力合作，定义和嵌入了系统级标准。

联盟开发了一个 I/O软件规格————VISA（the Virtual Instrument System Architecture），定义了下一代I/O软件标准，不仅适用于VXI，还适用于**GPIB**，**串口**以及其他接口。VISA标准在超过**35**家大型仪器生产公司的支持下，VISA统一了全行业，使软件可互通，可重构，并且经受住了时间的考验。此外，联盟还把流行的操作系统、应用开发环境以及编程语言分类到独立的框架中，并且定义了深入规范，以保证各个框架的组建能够互通。

## 支持的平台

LabWindows/CVI，ANSI C，LabVIEW

# VISA API 概述

本手册可作为**VISA API**的参考，**VISA API**分为三个独立的机制：**属性**、**事件**、**操作**，这三个独立的机制是访问信息的途径。

## VISA 访问机制

本节总结了各个机制最重要的一些**特性**，详细信息见下一章。

### 属性

属性描述了**会话**或**资源**中反应所给对象操作状态的特征，这些属性可以通过以下操作访问：
```C
viGetAttribute()
ViSetAttribute()
```

### 事件

**事件**是独立于系统中正常顺序执行的流程的一种非同步的**发生**。取决于需要如何处理事件的发生，你可以在`viEnableEnvent()`操作中使用`viInstallHandler()`操作或`viWaitonEvent()`操作。

**事件**对**属性**的响应与**资源**相同。当应用通过一个由`viWaitOnEvent()`接受的特定**事件**完成时，需要调用`viClose()`来摧毁这个事件。

### 操作

**操作**是由可以被所给**资源**执行的**资源**定义的行为。每个资源有定义一系列操作的能力。除了被各个**资源**定义的**操作**，以下操作模板可以在任何**资源**中被使用：

```VB
viClose()
viGetAttribute()
viSetAttribute()
viStatusDesc()
viTerminate()
viLock()
viUnlock()
viEnableEvent()
viDisableEvent()
viDiscardEvents()
viWaitOnEvent()
viInstallHandler()
viUninstallHandler()
```
## VISA 资源种类

目前，有各种各样的资源类型：**INSTR**, MEMacc, INTFC, BACKPLANE, SERVANT, SOCKET 和 RAW。大多数VISA应用和仪器驱动只用**INSTR 资源**。

### INSTR

**INSTR**资源能够使控制器和所给资源相关的设备交互。这类资源保证了控制者可以依据连接设备和接口类型选择使用**基于消息的输入/输出**还是**基于寄存器的输入/输出**，或是两者都用。

基本的**I/O**服务包括了向设备发送和从设备接受数据块的功能。数据的意义是依赖于设备的，可以是一条信息，一条指令或其他二进制编码的数据。对于**IEEE-488**兼容的设备，I/O服务还包括了**触发**（硬件的和软件的）、**服务请求**、**读取状态位** 和 **清除仪器**。

**格式化I/O**服务提供了与设备通信时的格式化和缓冲I/O的功能。格式化功能包括由ANSI C规定的和仪器系统使用的常见的协议。缓冲功能提高了系统的表现，可以传输大块数据和同时发送多个指令。

**内存I/O**（或**寄存器I/O**）服务允许寄存器级别的设备访问（对于支持内存直接访问的接口，如VXIbus或VMEbus）。高级和低级访问服务都提供了针对单个寄存器访问的操作，它们分别在速度和复杂性之间有取舍。高级访问服务还具有将大块数据从设备移入和移出的操作。当使用**INSTR**资源时，所有地址参数都是相对于设备在给定地址空间中分配的内存基址的；用户不需要知道设备的基址。

**内存共享**服务可以实现在一个只被给定会话使用的特定设备上分配内存。这通常只在那些专门为此目的导出共享内存的设备上可用，例如**VXIbus**或**VMEbus**控制器。

# 属性

敬请期待

# 事件

敬请期待


# 操作

## `viAssertIntrSignal`

插入具体的中断或信号

**C code**
``` C
Vistatus = viAssertIntrSignal(ViSession vi, ViInt16 mode, ViUInt32 statusID)
```

### 参数

|参数名|传递方向|描述|
|:--:|:--:|:--:|
|vi|入|会话的唯一逻辑标识符|
|mode|入|说明如何插入终端，实际值详见***描述***部分|
|statusID|入|中断确认周期中状态值的呈现，有效值详见***描述***部分|

### 返回值

|完成代码|描述|
|:--:|:--:|
|`VI_SUCCESS`|成功完成操作|


